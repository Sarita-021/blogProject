<script>
    document.addEventListener("DOMContentLoaded", function () {
        console.log("deleteConfirm.ejs loaded");

        setTimeout(() => {
            const deleteForm = document.getElementById("deleteForm");

            if (deleteForm) {
                console.log("Delete form found");

                deleteForm.addEventListener("submit", function (event) {
                    console.log("Delete button clicked");
                    if (!confirm("Are you sure you want to delete this post, <%= title %>?")) {
                        console.log("Deletion canceled");
                        event.preventDefault();
                    } else {
                        console.log("Post deleted");
                    }
                });
            } else {
                console.log("Delete form NOT found - checking again in 1s");
                setTimeout(() => {
                    const retryDeleteForm = document.getElementById("deleteForm");
                    if (retryDeleteForm) {
                        console.log("Delete form found on retry");
                        retryDeleteForm.addEventListener("submit", function (event) {
                            if (!confirm("Are you sure you want to delete this post, <%= title %>?")) {
                                event.preventDefault();
                            }
                        });
                    } else {
                        console.error("Delete form still NOT found after retry.");
                    }
                }, 1000);
            }
        }, 500);
    });
</script>

